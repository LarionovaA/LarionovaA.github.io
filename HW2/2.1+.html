<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Формат WebP </title>
    <link rel="stylesheet" href="style.css"> 
</head>
<body>
    <ul id="top">
        <li><a href="#about">Устройство WebP</a></li>
        <li><a href="#ex">Сравнение</a></li>
        <li><a href="#crb">Поддержка браузерами</a></li>
    </ul>
    <h1 id="about">Что же такое WebP?</h1>
    <p>WebP — сравнительно новый формат от Google. Картинки в этом формате занимают на 30% меньше места на странице благодаря особому сжатию, построенному на кодировании ключевых кадров в видеокодеке VP8.<br>
    WebP поддерживает сжатие с потерями и без, разные степени прозрачности, метаданные и может содержать встроенный ICC-профиль.</p>
    <h2>Как устроено сжатие в WebP</h2>
    <p>Сжатие <b>с потерями</b> основано на утверждении, что яркость и цвет соседних пикселей мало отличаются друг от друга.<br>Изображение делится на макроблоки. Внутри каждого макроблока декодер предсказывает яркость и цвет следующего пикселя на основе ранее полученных блоков. Он использует уже декодированные пиксели в непосредственной близости от каждого из макроблоков, и пытается закрасить неизвестные фрагменты в них. Таким образом данные о фрагментах, которые можно предсказать могут считаться лишними и удаляются из кода, что обеспечивает более эффективное сжатие.<br>
    После математически обратимого преобразования (с помощью ДКП) результат подвергается квантованию и энтропийному кодированию.</p>
    <h2>Lossy WebP</h2>
    <p>В lossy WebP используется <a href="https://ru.wikipedia.org/wiki/%D0%90%D1%80%D0%B8%D1%84%D0%BC%D0%B5%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D0%BA%D0%BE%D0%B4%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" title="">арифметическое</a> кодирование — один из алгоритмов энтропийного сжатия. В WebP используется блочное квантование и биты распределяются адаптивно между различными фрагментами изображения: меньшее количество бит для фрагментов с низкой энтропией и большее — для фрагментов с высокой. Такое кодирование считается более гибким, чем <a href="https://ru.wikipedia.org/wiki/%D0%9A%D0%BE%D0%B4_%D0%A5%D0%B0%D1%84%D1%84%D0%BC%D0%B0%D0%BD%D0%B0" title="">код Хаффмана</a> (который использует JPEG).<br> 
    JPEG делит изображение на одинаковые блоки, а технологии кодирования WebP использует умное деление. В тех частях картинки, где есть много мелких и быстро изменяющихся деталей блоки имеют размер 4 х 4 пикселя, а в монотонных областях — 16 х 16.</p>
    <a href="#top">Вернуться в начало</a>
    <img src="jpeg.jpg" title="example" alt="Пример кодирования обоих форматов">
    <h2>Сжатие без потерь</h2>
    <p>При сжатии без потерь используется вариант алгоритма LZ77 — кода Хаффмана. А также пространственное прогнозирование и преобразование цветового пространства.
    </p>
    <h2>Сжатие с альфа-каналом</h2>
    <p>Формат WebP позволяет получить сжатую картинку с альфа-каналом без потерь. Раньше, чтобы получить прозрачность все изображение должно было быть lossless. А в WebP можно уменьшить вес картинки с прозрачными областями.</p>
    <h2>Цветовое преобразование</h2>
    <p>Также в WebP используется методы адаптивного квантования цветовой составляющей, чтобы предотвратить влияние цветовых каналов друг на друга. Изображение делится на блоки и для каждого блока применяется свой режим трансформации green_to_red, green_to_blue или red_to_blue. Цветовое преобразование сохраняет неизменным значение зеленого канала G, преобразует красный R в зависимости от зеленого, и синий В в зависимости от зеленого, а затем в зависимости от красного.</p>
    <h2>Преимущества и недостатки</h2>
    <p>К <b>преимуществам</b> можно отнести меньший размер файла, улучшенный алгоритм сжатия, более качественные переходы цвета и маску альфа-канала</p>
    <p><b>Недостатками</b> же являются плохая поддержка браузерами (о ней чуть ниже), искажение имеет пластиковый вид. Так же важно понимать, что WebP не является и его нельзя, ни в коем случае, воспринимать как 100% замену PNG и JPEG. Это формат только для браузеров, которые могут с ним работать, но иметь другой формат для других браузеров придется, несомненно.</p>
    <a href="#top">Вернуться в начало</a>
    <h1 id="ex">Сравнение</h1>
    <p>Для проверки эффективности сжатия использовалась программы XnConvert и Adobe Photoshop. Исходное изображение в формате PNG сжималось в WebP с установкой объема 100кб. После этого оно еще раз конвертировалось в JPEG таким образом, чтобы объем файла совпадал с размером WebP.<br>
    Как показало сравнение, артефакты на картинках в WebP также присутствуют даже при средних настройках качества, однако во всех случаях они менее заметны, чем в JPEG. Особенно хорошо новый формат проявляет себя при высокой степени сжатия (малом размере файла). Там, где JPEG уже буквально распадается на квадраты, WebP выглядит достаточно неплохо.</p>
    <h2>Оригинальное изображение PNG, объем 3 836 кб</h2>
    <img src="image/png/evening.png" title="изображение" alt="PNG" width="500" height="350">
    <h2>JPEG</h2>
    <img src="image/jpeg/evening.jpg" title="изображение" alt="JPG" width="500" height="350">
    <h2>WebP</h2>
    <img src="image/WebP/evening.webp" title="изображение" alt="WEBP" width="500" height="350">
    <h2>Разница</h2>
    <img src="image/comparison/evening/bridge.png" title="изображение" alt="PNG" width="900" height="300">
    <img src="image/comparison/evening/cars.png" title="изображение" alt="PNG" width="900" height="300">
    <img src="image/comparison/evening/street.png" title="изображение" alt="PNG" width="900" height="300">
    <h2>Оригинальное изображение PNG, объем 2 204 кб</h2>
    <img src="image/png/nature.png" title="изображение" alt="original" width="500" height="350">
    <h2>JPEG</h2>
    <img src="image/jpeg/nature.jpg" title="изображение" alt="JPG" width="500" height="350">
    <h2>WebP</h2>
    <img src="image/WebP/nature.webp" title="изображение" alt="WEBP" width="500" height="350">
    <h2>Разница</h2>
    <img src="image/comparison/nature/church.png" title="изображение" alt="PNG" width="900" height="300">
    <img src="image/comparison/nature/house.png" title="изображение" alt="PNG" width="900" height="300">
    <h2>Оригинальное изображение PNG, объем 1 927 кб</h2>
    <img src="image/png/cat.png" title="изображение" alt="original" width="400" height="350">
    <h2>JPEG</h2>
    <img src="image/jpeg/cat.jpg" title="изображение" alt="JPG" width="400" height="350">
    <h2>WebP</h2>
    <img src="image/WebP/cat.webp" title="изображение" alt="WEBP" width="400" height="350">
    <h2>Разница</h2>
    <img src="image/comparison/cat/pillow.png" title="изображение" alt="PNG" width="900" height="300">
    <a href="#top">Вернуться в начало</a>
    <h1 id="crb">Кроссбраузерность</h1>
    <p>В настоящее время просмотр изображений в формате WebP поддерживается браузерами Google Chrome (начиная с 9 версии) и Opera (начиная с версии 11.10). Начиная с версии 26 также поддерживается браузером Pale Moon.<br>Android поддерживает чтение и запись WebP изображений начиная с версии 4.0.<br>С помощью специальной JavaScript-библиотеки возможно отображение в браузерах, поддерживающих видео в формате WebM, в частности, в Firefox 4.0 и более новых.<br> Существует также порт библиотеки libwebp под названием libwebpjs/libwebpas на JavaScript и ActionScript, позволяющий использовать WebP во всех популярных браузерах (поддержка IE6+ осуществляется с помощью дополнительного модуля Adobe Flash).</p>
</body>
</html>